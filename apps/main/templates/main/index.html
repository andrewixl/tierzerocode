{% extends 'main/base.html' %}
{% load static %}
  {% block content %}
			<main class="content">
				<div class="container-fluid p-0">

					<div class="row mb-2 mb-xl-3">
						<div class="col-auto d-none d-sm-block">
							<h3><strong>Analytics</strong> Dashboard</h3>
						</div>
					</div>
					<div class="row">
						<div class="col-xl-12 col-xxl-12 d-flex">
							<div class="w-100">
								<div class="row">
									{% for endpoint_device_count in endpoint_device_counts %}
									<div class="col-sm-3">
										<div class="card">
											<div class="card-body">
												<div class="row">
													<div class="col mt-0">
														<h5 class="card-title">{{endpoint_device_count.0}}</h5>
													</div>

													<div class="col-auto">
														<div class="stat text-primary">
															{% if endpoint_device_count.0 == 'Master List Endpoints' %}
															<i class="align-middle" data-feather="list"></i>
															{% else %}
															<img src="{% static endpoint_device_count.2 %}" class="align-middle" width="24" height="24" alt="{{endpoint_device_count.0}}">
															{% endif %}
														</div>
													</div>
												</div>
												<h1 class="mt-1 mb-3">{{endpoint_device_count.1}} Devices</h1>
											</div>
										</div>
									</div>
									{% endfor %}
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-12 col-md-6 col-xxl-3 d-flex order-1 order-xxl-3">
							<div class="card flex-fill w-100">
								<div class="card-header">
									<h5 class="card-title mb-0">OS Platforms</h5>
								</div>
								<div class="card-body d-flex">
									<div class="align-self-center w-100">
										<div class="py-3">
											<div class="chart chart-xs">
												<canvas id="dashboard-os-platform-pie"></canvas>
											</div>
										</div>

										<table class="table mb-0">
											<tbody>
												<tr>
													<td><i class="fas fa-circle text-primary fa-fw"></i> Android</td>
													<td class="text-end">{{osPlatformData.0}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-secondary fa-fw"></i> iOS/iPadOS</td>
													<td class="text-end">{{osPlatformData.1}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-success fa-fw"></i> MacOS</td>
													<td class="text-end">{{osPlatformData.2}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-danger fa-fw"></i> Ubuntu Server</td>
													<td class="text-end">{{osPlatformData.3}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-warning fa-fw"></i> Windows</td>
													<td class="text-end">{{osPlatformData.4}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-info fa-fw"></i> Windows Server</td>
													<td class="text-end">{{osPlatformData.5}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-dark fa-fw"></i> Other</td>
													<td class="text-end">{{osPlatformData.6}}</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<div class="col-12 col-md-6 col-xxl-3 d-flex order-1 order-xxl-3">
							<div class="card flex-fill w-100">
								<div class="card-header">
									<h5 class="card-title mb-0">Endpoint Type</h5>
								</div>
								<div class="card-body d-flex">
									<div class="align-self-center w-100">
										<div class="py-3">
											<div class="chart chart-xs">
												<canvas id="dashboard-endpoint-type-pie"></canvas>
											</div>
										</div>

										<table class="table mb-0">
											<tbody>
												<tr>
													<td><i class="fas fa-circle text-primary fa-fw"></i> Client</td>
													<td class="text-end">{{endpointTypeData.0}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-secondary fa-fw"></i> Mobile</td>
													<td class="text-end">{{endpointTypeData.1}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-success fa-fw"></i> Server</td>
													<td class="text-end">{{endpointTypeData.2}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-danger fa-fw"></i> Other</td>
													<td class="text-end">{{endpointTypeData.3}}</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<div class="col-12 col-md-6 col-xxl-3 d-flex order-1 order-xxl-3">
							<div class="card flex-fill w-100">
								<div class="card-header">
									<h5 class="card-title mb-0">Tier Zero Endpoints</h5>
								</div>
								<div class="card-body d-flex">
									<div class="align-self-center w-100">
										<div class="py-3">
											<div class="chart chart-xs">
												<canvas id="dashboard-tier-zero-pie"></canvas>
											</div>
										</div>

										<table class="table mb-0">
											<tbody>
												<tr>
													<td><i class="fas fa-circle text-success fa-fw"></i> {{compliantLabels.0}}</td>
													<td class="text-end">{{compliantData.0}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-danger fa-fw"></i> {{compliantLabels.1}}</td>
													<td class="text-end">{{compliantData.1}}</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="row">
						<div class="col-12 col-md-6 col-xxl-3 d-flex order-1 order-xxl-3">
							<div class="card flex-fill w-100">
								<div class="card-header">
									<h5 class="card-title mb-0">Highest Auth Method Adoption</h5>
								</div>
								<div class="card-body d-flex">
									<div class="align-self-center w-100">
										<div class="py-3">
											<div class="chart chart-xs">
												<canvas id="highest-auth-pie"></canvas>
											</div>
										</div>

										<table class="table mb-0">
											<tbody>
												<tr>
													<td><i class="fas fa-circle text-primary fa-fw"></i> Phishing Resistant</td>
													<td class="text-end">{{auth_method_data.0}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-secondary fa-fw"></i> Passwordless</td>
													<td class="text-end">{{auth_method_data.1}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-success fa-fw"></i> MFA</td>
													<td class="text-end">{{auth_method_data.2}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-danger fa-fw"></i> Deprecated</td>
													<td class="text-end">{{auth_method_data.3}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-warning fa-fw"></i> None</td>
													<td class="text-end">{{auth_method_data.4}}</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<div class="col-12 col-md-6 col-xxl-3 d-flex order-1 order-xxl-3">
							<div class="card flex-fill w-100">
								<div class="card-header">
									<h5 class="card-title mb-0">Full Passwordless Users</h5>
								</div>
								<div class="card-body d-flex">
									<div class="align-self-center w-100">
										<div class="py-3">
											<div class="chart chart-xs">
												<canvas id="full-passwordless-pie"></canvas>
											</div>
										</div>

										<table class="table mb-0">
											<tbody>
												<tr>
													<td><i class="fas fa-circle text-success fa-fw"></i> Full Passwordless</td>
													<td class="text-end">{{count_passwordless_data.0}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-danger fa-fw"></i> Non-Passwordless</td>
													<td class="text-end">{{count_passwordless_data.1}}</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
						<div class="col-12 col-md-6 col-xxl-3 d-flex order-1 order-xxl-3">
							<div class="card flex-fill w-100">
								<div class="card-header">
									<h5 class="card-title mb-0">Lowest Auth Methods</h5>
								</div>
								<div class="card-body d-flex">
									<div class="align-self-center w-100">
										<div class="py-3">
											<div class="chart chart-xs">
												<canvas id="lowest-auth-pie"></canvas>
											</div>
										</div>

										<table class="table mb-0">
											<tbody>
												<tr>
													<td><i class="fas fa-circle text-primary fa-fw"></i> {{auth_method_low_labels.0}}</td>
													<td class="text-end">{{auth_method_low_data.0}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-secondary fa-fw"></i> {{auth_method_low_labels.1}}</td>
													<td class="text-end">{{auth_method_low_data.1}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-success fa-fw"></i> {{auth_method_low_labels.2}}</td>
													<td class="text-end">{{auth_method_low_data.2}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-danger fa-fw"></i> {{auth_method_low_labels.3}}</td>
													<td class="text-end">{{auth_method_low_data.3}}</td>
												</tr>
												<tr>
													<td><i class="fas fa-circle text-warning fa-fw"></i> {{auth_method_low_labels.4}}</td>
													<td class="text-end">{{auth_method_low_data.4}}</td>
												</tr>
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</main>
			<script>
				document.addEventListener("DOMContentLoaded", function() {
					// Pie chart
					new Chart(document.getElementById("dashboard-os-platform-pie"), {
						type: "pie",
						data: {
							labels: {{ osPlatformLabels|safe }},
							datasets: [{ 
								data: {{ osPlatformData|safe }},
								backgroundColor: [
									window.theme.primary,
									window.theme.secondary,
									window.theme.success,
									window.theme.danger,
									window.theme.warning,
									window.theme.info,
									'rgb(0,0,0)',
								],
								borderWidth: 5,
								borderColor: window.theme.white
							}]
						},
						options: {
							responsive: !window.MSInputMethodContext,
							maintainAspectRatio: false,
							legend: {
								display: false
							},
							cutoutPercentage: 70
						}
					});
				});
			</script>
			<script>
				document.addEventListener("DOMContentLoaded", function() {
					// Pie chart
					new Chart(document.getElementById("dashboard-endpoint-type-pie"), {
						type: "pie",
						data: {
							labels: {{ endpointTypeLabels|safe }},
							datasets: [{
								data: {{ endpointTypeData|safe }},
								backgroundColor: [
									window.theme.primary,
									window.theme.secondary,
									window.theme.success,
									window.theme.danger,
									// "#E8EAED"
								],
								borderWidth: 5,
								borderColor: window.theme.white
							}]
						},
						options: {
							responsive: !window.MSInputMethodContext,
							maintainAspectRatio: false,
							legend: {
								display: false
							},
							cutoutPercentage: 70
						}
					});
				});
			</script>
			<script>
				document.addEventListener("DOMContentLoaded", function() {
					// Pie chart
					new Chart(document.getElementById("dashboard-tier-zero-pie"), {
						type: "pie",
						data: {
							labels: {{ compliantLabels|safe }},
							datasets: [{
								data: {{ compliantData|safe }},
								backgroundColor: [
									window.theme.success,
									window.theme.danger,
									"#E8EAED"
								],
								borderWidth: 5,
								borderColor: window.theme.white
							}]
						},
						options: {
							responsive: !window.MSInputMethodContext,
							maintainAspectRatio: false,
							legend: {
								display: false
							},
							cutoutPercentage: 70
						}
					});
				});
			</script>
			<script>
				document.addEventListener("DOMContentLoaded", function() {
					// Pie chart
					new Chart(document.getElementById("highest-auth-pie"), {
						type: "pie",
						data: {
							labels: {{ auth_method_labels|safe }},
							datasets: [{ 
								data: {{ auth_method_data|safe }},
								backgroundColor: [
									window.theme.primary,
									window.theme.secondary,
									window.theme.success,
									window.theme.danger,
									window.theme.warning,
								],
								borderWidth: 5,
								borderColor: window.theme.white
							}]
						},
						options: {
							responsive: !window.MSInputMethodContext,
							maintainAspectRatio: false,
							legend: {
								display: false
							},
							cutoutPercentage: 70
						}
					});
				});
			</script>
			<script>
				document.addEventListener("DOMContentLoaded", function() {
					// Pie chart
					new Chart(document.getElementById("full-passwordless-pie"), {
						type: "pie",
						data: {
							labels: {{ count_passwordless_labels|safe }},
							datasets: [{ 
								data: {{ count_passwordless_data|safe }},
								backgroundColor: [
									window.theme.success,
									window.theme.danger,
								],
								borderWidth: 5,
								borderColor: window.theme.white
							}]
						},
						options: {
							responsive: !window.MSInputMethodContext,
							maintainAspectRatio: false,
							legend: {
								display: false
							},
							cutoutPercentage: 70
						}
					});
				});
			</script>
			<script>
				document.addEventListener("DOMContentLoaded", function() {
					// Pie chart
					new Chart(document.getElementById("lowest-auth-pie"), {
						type: "pie",
						data: {
							labels: {{ auth_method_low_labels|safe }},
							datasets: [{ 
								data: {{ auth_method_low_data|safe }},
								backgroundColor: [
									window.theme.primary,
									window.theme.secondary,
									window.theme.success,
									window.theme.danger,
									window.theme.warning,
								],
								borderWidth: 5,
								borderColor: window.theme.white
							}]
						},
						options: {
							responsive: !window.MSInputMethodContext,
							maintainAspectRatio: false,
							legend: {
								display: false
							},
							cutoutPercentage: 70
						}
					});
				});
			</script>
{% endblock %}